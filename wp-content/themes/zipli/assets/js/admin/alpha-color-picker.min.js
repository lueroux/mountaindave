!function(o){function s(i){var a;return a=(i=i.replace(/ /g,"")).match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(a=100*parseFloat(i.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),parseInt(a)):100}function r(i,a,r,t){var o=a.data("a8cIris"),n=a.data("wpWpColorPicker");o._color._alpha=i,o=o._color.toString(),a.val(o),n.toggler.css({"background-color":o}),t&&d(i,r),a.wpColorPicker("color",o)}function d(i,a){a.slider("value",i),a.find(".ui-slider-handle").text(i.toString())}Color.prototype.toString=function(i){if("no-alpha"==i)return this.toCSS("rgba","1").replace(/\s+/g,"");if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var a=parseInt(this._color,10).toString(16);if(this.error)return"";if(a.length<6)for(var r=6-a.length-1;0<=r;r--)a="0"+a;return"#"+a},o.fn.alphaColorPicker=function(){return this.each(function(){var t,i,n,e,c,a,l=o(this);l.wrap('<div class="alpha-color-picker-wrap"></div>'),a=l.attr("data-palette")||"true",i=l.attr("data-show-opacity")||"true",n=l.attr("data-default-color")||"",a=-1!==a.indexOf("|")?a.split("|"):"false"!=a,""==(t=l.val().replace(/\s+/g,""))&&(t=n),a={change:function(i,a){var r,t=l.attr("data-customize-setting-link"),o=l.wpColorPicker("color");n==o&&(r=s(o),c.find(".ui-slider-handle").text(r)),void 0!==wp.customize&&wp.customize(t,function(i){i.set(o)}),e.find(".transparency").css("background-color",a.color.toString("no-alpha"))},palettes:a},l.wpColorPicker(a),e=l.parents(".wp-picker-container:first"),o('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(e.find(".wp-picker-holder")),c=e.find(".alpha-slider"),a={create:function(i,a){var r=o(this).slider("value");o(this).find(".ui-slider-handle").text(r),o(this).siblings(".transparency ").css("background-color",t)},value:s(t),range:"max",step:1,min:0,max:100,animate:300},c.slider(a),"true"==i&&c.find(".ui-slider-handle").addClass("show-opacity"),e.find(".min-click-zone").on("click",function(){r(0,l,c,!0)}),e.find(".max-click-zone").on("click",function(){r(100,l,c,!0)}),e.find(".iris-palette").on("click",function(){var i=o(this).css("background-color"),a=s(i);d(a,c),100!=a&&(i=i.replace(/[^,]+(?=\))/,(a/100).toFixed(2))),l.wpColorPicker("color",i)}),e.find(".button.wp-picker-default").on("click",function(){d(s(n),c)}),l.on("input",function(){d(s(o(this).val()),c)}),c.slider().on("slide",function(i,a){r(parseFloat(a.value)/100,l,c,!1),o(this).find(".ui-slider-handle").text(a.value)})})},o(document).ready(function(){o("input.alpha-color-control").alphaColorPicker()})}(jQuery);